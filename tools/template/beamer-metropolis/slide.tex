\documentclass[aspectratio=169]{beamer}
\usepackage[UTF8]{ctex}
\usetheme[progressbar=foot]{metropolis}
\usepackage{minted}
\usemintedstyle{rainbow_dash}
\usepackage[natbib=true,sorting=none]{biblatex}
\addbibresource{ref.bib}

\usepackage{appendixnumberbeamer}
\usepackage{booktabs}
\usepackage[scale=2]{ccicons}
\usepackage{pgfplots}
\usepgfplotslibrary{dateplot}
\usepackage{xspace}
\newcommand{\themename}{\textbf{\textsc{metropolis}}\xspace}

\setsansfont{Noto Sans CJK SC}
\setmonofont{Fira Code}

\definecolor{thu}{RGB}{130,49,142}
\setbeamercolor*{titlelike}{fg=thu}
\setbeamercolor*{frametitle}{fg=white, bg=thu}
\setbeamercolor*{progress bar}{fg=thu}
\setbeamercolor*{structure}{fg=thu}

\title{THU + Metropolis Template}
\subtitle{一个微调颜色化身THU风格的Metropolis模板}
\date{YY年MM月DD日}
\author{暮月}
\institute{华清大学}

\titlegraphic{
    \begin{tikzpicture}[overlay,remember picture]
        \node[left=0.4cm] at (current page.340){
            \includegraphics[width=2cm]{Tsinghua_University_Logo.png}
        };
    \end{tikzpicture}
}


\begin{document}
\maketitle

\begin{frame}{目录}
    \tableofcontents
\end{frame}

\section{Introduction}

\begin{frame}[fragile]{Metropolis}

    Metropolis 是一个 Beamer 主题，去除大量视觉噪音，极简。

    项目地址：\href{https://github.com/matze/mtheme}{matze/mtheme}

    Metropolis 建议使用 Fira Sans 作为字体。出于使用汉字的考虑，我使用了 Noto Sans CJK SC 和 Fira Code，可以修改这两行为使用者喜爱的字体：

    \begin{minted}[linenos, firstnumber=9]{tex}
\setsansfont{Noto Sans CJK SC}
\setmonofont{Fira Code}
    \end{minted}
\end{frame}

\begin{frame}[fragile]{Sections}
    可以使用 Section 来组织幻灯片

    Metropolis 会渲染一个节标题页面，并带有进度条

    \begin{alertblock}{注意}
        接下来是对 Metropolis 官方 Demo 的复制粘贴，以演示其功能
    \end{alertblock}
\end{frame}

\section{Title formats}

\begin{frame}{Metropolis title formats}
    \themename supports 4 different title formats:
    \begin{itemize}
        \item Regular
        \item \textsc{Small caps}
        \item \textsc{all small caps}
        \item ALL CAPS
    \end{itemize}
    They can either be set at once for every title type or individually.
\end{frame}

{
\metroset{titleformat frame=smallcaps}
\begin{frame}{Small caps}
    This frame uses the \texttt{smallcaps} title format.

    \begin{alertblock}{Potential Problems}
        Be aware that not every font supports small caps. If for example you typeset your presentation with pdfTeX and the Computer Modern Sans Serif font, every text in small caps will be typeset with the Computer Modern Serif font instead.
    \end{alertblock}
\end{frame}
}

{
\metroset{titleformat frame=allsmallcaps}
\begin{frame}{All small caps}
    This frame uses the \texttt{allsmallcaps} title format.

    \begin{alertblock}{Potential problems}
        As this title format also uses small caps you face the same problems as with the \texttt{smallcaps} title format. Additionally this format can cause some other problems. Please refer to the documentation if you consider using it.

        As a rule of thumb: just use it for plaintext-only titles.
    \end{alertblock}
\end{frame}
}

{
\metroset{titleformat frame=allcaps}
\begin{frame}{All caps}
    This frame uses the \texttt{allcaps} title format.

    \begin{alertblock}{Potential Problems}
        This title format is not as problematic as the \texttt{allsmallcaps} format, but basically suffers from the same deficiencies. So please have a look at the documentation if you want to use it.
    \end{alertblock}
\end{frame}
}

\section{Elements}

\begin{frame}[fragile]{Typography}
    \begin{verbatim}The theme provides sensible defaults to
\emph{emphasize} text, \alert{accent} parts
or show \textbf{bold} results.\end{verbatim}

    \begin{center}becomes\end{center}

    The theme provides sensible defaults to \emph{emphasize} text,
    \alert{accent} parts or show \textbf{bold} results.
\end{frame}

\begin{frame}{Font feature test}
    \begin{itemize}
        \item Regular
        \item \textit{Italic}
        \item \textsc{Small Caps}
        \item \textbf{Bold}
        \item \textbf{\textit{Bold Italic}}
        \item \textbf{\textsc{Bold Small Caps}}
        \item \texttt{Monospace}
        \item \texttt{\textit{Monospace Italic}}
        \item \texttt{\textbf{Monospace Bold}}
        \item \texttt{\textbf{\textit{Monospace Bold Italic}}}
    \end{itemize}
\end{frame}

\begin{frame}{Lists}
    \begin{columns}[T,onlytextwidth]
        \column{0.33\textwidth}
        Items
        \begin{itemize}
            \item Milk \item Eggs \item Potatoes
        \end{itemize}

        \column{0.33\textwidth}
        Enumerations
        \begin{enumerate}
            \item First, \item Second and \item Last.
        \end{enumerate}

        \column{0.33\textwidth}
        Descriptions
        \begin{description}
            \item[PowerPoint] Meeh. \item[Beamer] Yeeeha.
        \end{description}
    \end{columns}
\end{frame}
\begin{frame}{Animation}
    \begin{itemize}[<+- | alert@+>]
        \item \alert<4>{This is\only<4>{ really} important}
        \item Now this
        \item And now this
    \end{itemize}
\end{frame}
\begin{frame}{Figures}
    \begin{figure}
        \newcounter{density}
        \setcounter{density}{20}
        \begin{tikzpicture}
            \def\couleur{alerted text.fg}
            \path[coordinate] (0,0)  coordinate(A)
            ++( 90:5cm) coordinate(B)
            ++(0:5cm) coordinate(C)
            ++(-90:5cm) coordinate(D);
            \draw[fill=\couleur!\thedensity] (A) -- (B) -- (C) --(D) -- cycle;
            \foreach \x in {1,...,40}{%
                    \pgfmathsetcounter{density}{\thedensity+20}
                    \setcounter{density}{\thedensity}
                    \path[coordinate] coordinate(X) at (A){};
                    \path[coordinate] (A) -- (B) coordinate[pos=.10](A)
                    -- (C) coordinate[pos=.10](B)
                    -- (D) coordinate[pos=.10](C)
                    -- (X) coordinate[pos=.10](D);
                    \draw[fill=\couleur!\thedensity] (A)--(B)--(C)-- (D) -- cycle;
                }
        \end{tikzpicture}
        \caption{Rotated square from
            \href{http://www.texample.net/tikz/examples/rotated-polygons/}{texample.net}.}
    \end{figure}
\end{frame}
\begin{frame}{Tables}
    \begin{table}
        \caption{Largest cities in the world (source: Wikipedia)}
        \begin{tabular}{@{} lr @{}}
            \toprule
            City        & Population \\
            \midrule
            Mexico City & 20,116,842 \\
            Shanghai    & 19,210,000 \\
            Peking      & 15,796,450 \\
            Istanbul    & 14,160,467 \\
            \bottomrule
        \end{tabular}
    \end{table}
\end{frame}
\begin{frame}{Blocks}
    Three different block environments are pre-defined and may be styled with an
    optional background color.

    \begin{columns}[T,onlytextwidth]
        \column{0.5\textwidth}
        \begin{block}{Default}
            Block content.
        \end{block}

        \begin{alertblock}{Alert}
            Block content.
        \end{alertblock}

        \begin{exampleblock}{Example}
            Block content.
        \end{exampleblock}

        \column{0.5\textwidth}

        \metroset{block=fill}

        \begin{block}{Default}
            Block content.
        \end{block}

        \begin{alertblock}{Alert}
            Block content.
        \end{alertblock}

        \begin{exampleblock}{Example}
            Block content.
        \end{exampleblock}

    \end{columns}
\end{frame}
\begin{frame}{Math}
    \begin{equation*}
        e = \lim_{n\to \infty} \left(1 + \frac{1}{n}\right)^n
    \end{equation*}
\end{frame}
\begin{frame}{Line plots}
    \begin{figure}
        \begin{tikzpicture}
            \begin{axis}[
                    mlineplot,
                    width=0.9\textwidth,
                    height=6cm,
                ]

                \addplot {sin(deg(x))};
                \addplot+[samples=100] {sin(deg(2*x))};

            \end{axis}
        \end{tikzpicture}
    \end{figure}
\end{frame}
\begin{frame}{Bar charts}
    \begin{figure}
        \begin{tikzpicture}
            \begin{axis}[
                    mbarplot,
                    xlabel={Foo},
                    ylabel={Bar},
                    width=0.9\textwidth,
                    height=6cm,
                ]

                \addplot plot coordinates {(1, 20) (2, 25) (3, 22.4) (4, 12.4)};
                \addplot plot coordinates {(1, 18) (2, 24) (3, 23.5) (4, 13.2)};
                \addplot plot coordinates {(1, 10) (2, 19) (3, 25) (4, 15.2)};

                \legend{lorem, ipsum, dolor}

            \end{axis}
        \end{tikzpicture}
    \end{figure}
\end{frame}
\begin{frame}{Quotes}
    \begin{quote}
        Veni, Vidi, Vici
    \end{quote}
\end{frame}

{%
\setbeamertemplate{frame footer}{My custom footer}
\begin{frame}[fragile]{Frame footer}
    \themename defines a custom beamer template to add a text to the footer. It can be set via
    \begin{verbatim}\setbeamertemplate{frame footer}{My custom footer}\end{verbatim}
\end{frame}
}

\begin{frame}{References}
    Some references to showcase [allowframebreaks] \cite{knuth92,ConcreteMath,Simpson,Er01,greenwade93}
\end{frame}

\section{Conclusion}

\begin{frame}{Summary}

    Get the source of this theme and the demo presentation from

    \begin{center}\url{github.com/matze/mtheme}\end{center}

    The theme \emph{itself} is licensed under a
    \href{http://creativecommons.org/licenses/by-sa/4.0/}{Creative Commons
        Attribution-ShareAlike 4.0 International License}.

    \begin{center}\ccbysa\end{center}

\end{frame}

\begin{frame}[standout]
    Questions?
\end{frame}

\appendix

\begin{frame}[fragile]{Backup slides}
    Sometimes, it is useful to add slides at the end of your presentation to
    refer to during audience questions.

    The best way to do this is to include the \verb|appendixnumberbeamer|
    package in your preamble and call \verb|\appendix| before your backup slides.

    \themename will automatically turn off slide numbering and progress bars for
    slides in the appendix.
\end{frame}

\begin{frame}[allowframebreaks]{References}

    \printbibliography[heading=none]

\end{frame}

\end{document}